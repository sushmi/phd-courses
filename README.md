# BI project

## Project Structure

```code 
bi/
├── .vscode/             # VS Code workspace settings (launch.json, settings.json)
├── data/
│   ├── raw/             # NEVER edit these files
│   └── processed/       # Outputs from code
├── src/                 # Analysis Code (Python, R, etc.)
│   ├── main.py
│   └── utils.py
├── figures/             # Graphs generated by code
├── manuscript/          # LaTeX source files
│   ├── main.tex         # The "Root" file
│   ├── sections/        # Modular tex files (intro.tex, methods.tex)
│   ├── refs.bib         # BibDesk export
│   └── output/          # All the LaTeX "clutter" (aux, log, pdf)
├── README.md            # How to run the code and compile the paper
└── .gitignore           # Keeps auxiliary files out of your Git repo
└── pyproject.toml       # python configuration for the project; project metadata; settings for build tools

```

## Modularized LaTeX

Different sections are managed on different sections for mantainability purpose. Easy to find errors, and one tex file focus only on one area.

### LaTeX Configuration file

### Integrate Latex Workshop
Add `Latex Workshop` plugins

#### Why use LaTeX Workshop ?

LaTeX Workshop is a VS Code extension that provides a complete LaTeX development environment.

#### What it offers:

| Feature | Purpose |
|---------|---------|
| Build/Compile | Runs LaTeX compiler (pdflatex, latexmk, etc.) with a button click |
| PDF Viewer | Built-in PDF viewer in VS Code tab (no external reader needed) |
| SyncTeX | Click in PDF → jump to source code in editor (inverse search) |
| Syntax Highlighting | Color-codes LaTeX syntax |
| Snippets | Auto-complete for LaTeX commands |
| Code Folding | Collapse/expand sections |
| Linting | Detects LaTeX errors in real-time |
| Quick Build | Keyboard shortcut (Cmd+Alt+B) to compile |

#### Behind the plugin tech

The chain of command used by Latex configuration in this project.
```sh 
LaTeX Workshop (plugin)
  ↓
Calls: latexmk main.tex
  ↓
latexmk reads .latexmkrc
  ↓
latexmk runs: pdflatex (or lualatex if configured)
  ↓
Generates: PDF in output/, aux files in build/
```


#### Deugging Tips:
> If you experience IDE latexmk run button working differently (for example files are generated in different directlires or seems like random), then your latexmk config under settings.json is not in syn with .latexmkrc under manuscript.

#### Things to know
> pdf and synctex.gz are considered as output of latexmk command. If you place syntex.gz in different folder or delete it, pdf won't be rendered in vscode. Keep them together.

#### Learn latexmk configuration

Each configuration used in this project explained:

| Config | Meaning |
|--------|---------|
| `$out_dir = 'output'` | Final output files (.pdf) go here |
| `$aux_dir = 'build'` | Auxiliary files (.aux, .log, .fls) go here |
| `$pdf_mode = 1` | Generate PDF output (1 = yes, 0 = no) |
| `$postscript_mode = 0` | Don't generate PostScript (0 = disabled) |
| `$dvi_mode = 0` | Don't generate DVI (0 = disabled) |
| `$pdflatex = '...'` | Command to run pdflatex with `-interaction=nonstopmode` (non-interactive) and `-synctex=1` (for PDF sync with editor) |
| `$bibtex_use = 2` | Use BibTeX if needed (2 = use if citation exists) |
| `$force_mode = 0` | Don't force rebuild every time (0 = rebuild only if needed) |
| `$cleanup_mode = 0` | Don't auto-delete auxiliary files after build |
| `1;` | Perl syntax requirement - must end with truthy value |

Other generated files:

.aux - cross-references
.log - compilation log
.pdf - final output
.synctex.gz - for editor sync

### Compile and Generate pdf preview

Use VS Code editor to compile, however if you like to do with command you can use `latexmk`

```sh
cd ~/bi/manuscript && latexmk -C
```

Generate or Preview PDF

A `run` button next to TEX file will generate the preview. You can use execute command too, it is useful for debugging purpose.

```sh
 latexmk -pdf main.tex
```


### `uv` as build tool for code

To enable uv in the project folder. Define configuration in `pyproject.toml`

```sh
uv init
```

uv sync the project chnages

```sh
uv sync
```


build uv project
```sh
uv build
```